# 设备固件升级

AIOT开放API供第三方应用可以操作智能设备的固件升级。当智能设备有新固件上线后，会通知到第三方应用，同时也允许第三方应用来查询是否有新固件。






| API | 描述 | payload | header | response |
| -- | -- | -- | -- | -- |
| /open/ota/query/firmware | 查询可升级的固件 | {"openId":"xxx"} | {"Appid":"xxx","Appkey":"xxx","Openid":"xxx","Access-Token":"xxx"} | {"code":0(errorcode), "result":[{"did":"xxx","name":"xxx","deviceModel":"xxx","firmwareVersion":"xxx","upgradeFirmware":{"firmwareVersion":"xxx","fileSize":"xxx","updateLog":"xxx","releaseDate":"xxx"},"position":{"positionType":"room/home","positionId":"xxx"}}]} |
| /open/ota/query/firmware/selected | 查询可升级的固件 | {"openId":"xxx","did":"xxx"} | {"code":0(errorcode), "result":{"did":"xxx","name":"xxx","deviceModel":"xxx","firmwareVersion":"xxx","upgradeFirmware":{"firmwareVersion":"xxx","fileSize":"xxx","updateLog":"xxx","releaseDate":"xxx"},"position":{"positionType":"room/home","positionId":"xxx"}}} |
| /open/ota/upgrade/firmware | 升级固件（一键升级多个固件） | {"openId":"xxx"} | {"code":0(errorcode), "result":"xxx"} |
| /open/ota/upgrade/firmware/selected | 升级指定设备固件 | {"openId":"xxx","did":"xxx"} | {"code":0(errorcode), "result":"xxx"} |
| /open/ota/query/firmware/upgrade/history | 查询设备固件升级历史 | {"openId":"xxx","did":"xxx"} | {"code":0(errorcode), "result":[{"firmwareVersion":"xxx","deviceModel":"xxx","upgradeDate":"xxx","updateLog":"xxx","upgradeResult":0(失败)|1(成功),"cause":"xxx","upgradeTimeStamp":xxx}]} |