# 设备属性推送

智能设备需要实时上报属性，以便应用和用户可以实时了解到设备状态的改变。另外，云平台需要知道设备当前是否在线，这就要求设备发心跳包上来。AIOT建立了完善的设备管理和资源管理机制，可以实时掌握设备状态，并通过订阅接口，将这些信息实时推送至第三方应用后台。这就需要第三方应用后台提供订阅接口，这里需要规范一下接口的数据格式。此处建议提供HTTPS协议接口。


##设备属性上报

绿米智能硬件的属性均使用资源的方式来定义（详见资源定义文档），AIOT收到设备属性上报之后，立即将数据推送至第三方应用后台提供的接口。数据格式如下：

| payload | header | 描述 |
| -- | -- | -- |
| {"msgType":"device_resource","did":"xxx","time":xxx,"data":{"attr1":"xxx","attr2":"xxx",...}} | {"Appid":"xxx","Appkey":"xxx"} | 设备属性推送 |

> - attr: 属性（资源id）
> - msgType: 消息类型
> - time: 时间戳（单位为秒）